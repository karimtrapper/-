<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>–ö–∞–ª—å–∫—É–ª—è—Ç–æ—Ä –æ–±–º–µ–Ω–∞ - Doverka & Broker</title>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="styles.css?v=5">
</head>
<body>
    <div class="container">
        <header class="header">
            <div class="logo">
                <span class="logo-icon">üßÆ</span>
                <h1>–ö–∞–ª—å–∫—É–ª—è—Ç–æ—Ä –æ–±–º–µ–Ω–∞</h1>
            </div>
            <div class="subtitle">RUB ‚Üî THB ‚Üî USDT | v5 –¢–û–ß–ù–´–ï –ö–£–†–°–´</div>
        </header>

        <!-- –ü–µ—Ä–µ–∫–ª—é—á–∞—Ç–µ–ª—å –º–µ—Ç–æ–¥–∞ -->
        <div class="method-switcher">
            <button class="method-btn active" data-method="doverka" onclick="switchMethod('doverka')">
                üè¶ Doverka (SBP)
            </button>
            <button class="method-btn" data-method="broker" onclick="switchMethod('broker')">
                üíº –ë—Ä–æ–∫–µ—Ä
            </button>
        </div>

        <!-- –ê–∫—Ç—É–∞–ª—å–Ω—ã–µ –∫—É—Ä—Å—ã -->
        <div class="rates-card" id="ratesCard">
            <div class="rates-header">
                <span class="rates-title">üìä –ê–∫—Ç—É–∞–ª—å–Ω—ã–µ –∫—É—Ä—Å—ã</span>
                <button class="refresh-btn" id="refreshBtn" onclick="refreshRates()">
                    <span class="refresh-icon">‚Üª</span> –û–±–Ω–æ–≤–∏—Ç—å
                </button>
            </div>
            <div class="rates-grid">
                <div class="rate-item">
                    <div class="rate-label">USDT-THB (Binance)</div>
                    <div class="rate-value" id="usdtThbRate">31.16 ‡∏ø</div>
                </div>
                <div class="rate-item">
                    <div class="rate-label" id="rubUsdtLabel">RUB-USDT (Doverka)</div>
                    <div class="rate-value" id="rubUsdtRate">84.23 ‚ÇΩ</div>
                </div>
                <div class="rate-item highlight">
                    <div class="rate-label">–ü—Ä–∏–º–µ—Ä–Ω—ã–π –∫—É—Ä—Å</div>
                    <div class="rate-value" id="estimatedRate">~2.79 ‚ÇΩ/‡∏ø</div>
                </div>
            </div>
            <div class="rates-updated" id="ratesUpdated">
                –û–±–Ω–æ–≤–ª–µ–Ω–æ: <span id="updateTime">–∑–∞–≥—Ä—É–∑–∫–∞...</span>
            </div>
        </div>

        <!-- –ö–∞—Å—Ç–æ–º–Ω—ã–π –∫—É—Ä—Å –¥–ª—è –±—Ä–æ–∫–µ—Ä–∞ -->
        <div class="custom-rate-section" id="customRateSection" style="display: none;">
            <label for="customRubUsdt" class="input-label">
                üíº –ö–∞—Å—Ç–æ–º–Ω—ã–π –∫—É—Ä—Å RUB-USDT (–∑–∞–¥–∞–µ—Ç –º–µ–Ω–µ–¥–∂–µ—Ä)
            </label>
            <div class="input-wrapper">
                <input 
                    type="text" 
                    id="customRubUsdt" 
                    class="amount-input" 
                    placeholder="80.90"
                    value="80.90"
                    oninput="formatInput(this); updateCustomRate(); calculate()"
                >
                <span class="input-currency">‚ÇΩ</span>
            </div>
            <div class="rate-hint">
                üí° –ö—É—Ä—Å USDT-THB –±–µ—Ä–µ—Ç—Å—è –æ—Ç Binance API –≤ —Ä–µ–∞–ª—å–Ω–æ–º –≤—Ä–µ–º–µ–Ω–∏
            </div>
        </div>

        <!-- –£—Ä–æ–≤–µ–Ω—å –∫–æ–º–∏—Å—Å–∏–π –¥–ª—è –±—Ä–æ–∫–µ—Ä–∞ -->
        <div class="commission-level-section" id="commissionLevelSection" style="display: none;">
            <label class="input-label">‚öôÔ∏è –£—Ä–æ–≤–µ–Ω—å –∫–æ–º–∏—Å—Å–∏–π</label>
            <div class="commission-buttons">
                <button class="commission-btn" data-level="high" onclick="setCommissionLevel('high')">
                    –í—ã—Å–æ–∫–∏–π (5%)
                </button>
                <button class="commission-btn active" data-level="medium" onclick="setCommissionLevel('medium')">
                    –°—Ä–µ–¥–Ω–∏–π (4%)
                </button>
                <button class="commission-btn" data-level="low" onclick="setCommissionLevel('low')">
                    –ù–∏–∑–∫–∏–π (3%)
                </button>
            </div>
        </div>

        <!-- –ü–µ—Ä–µ–∫–ª—é—á–∞—Ç–µ–ª—å —Å—Ü–µ–Ω–∞—Ä–∏—è -->
        <div class="scenario-switcher" id="scenarioSwitcher">
            <!-- Doverka —Å—Ü–µ–Ω–∞—Ä–∏–∏ -->
            <button class="scenario-btn active" data-scenario="rub-to-thb" data-method="doverka" onclick="switchScenario('rub-to-thb')">
                <span class="scenario-icon">üí∞</span>
                <div>
                    <div class="scenario-title">RUB ‚Üí THB</div>
                    <div class="scenario-desc">–ö–ª–∏–µ–Ω—Ç –≤–Ω–æ—Å–∏—Ç —Ä—É–±–ª–∏</div>
                </div>
            </button>
            <button class="scenario-btn" data-scenario="thb-to-rub" data-method="doverka" onclick="switchScenario('thb-to-rub')">
                <span class="scenario-icon">üí∏</span>
                <div>
                    <div class="scenario-title">THB ‚Üê RUB</div>
                    <div class="scenario-desc">–ö–ª–∏–µ–Ω—Ç —Ö–æ—á–µ—Ç –±–∞—Ç—ã</div>
                </div>
            </button>
            
            <!-- Broker —Å—Ü–µ–Ω–∞—Ä–∏–∏ (—Å–∫—Ä—ã—Ç—ã –ø–æ —É–º–æ–ª—á–∞–Ω–∏—é) -->
            <button class="scenario-btn" data-scenario="rub-to-thb" data-method="broker" style="display: none;" onclick="switchScenario('rub-to-thb')">
                <span class="scenario-icon">üí∞</span>
                <div>
                    <div class="scenario-title">RUB ‚Üí THB</div>
                    <div class="scenario-desc">–ß–µ—Ä–µ–∑ –±—Ä–æ–∫–µ—Ä–∞</div>
                </div>
            </button>
            <button class="scenario-btn" data-scenario="thb-to-usdt" data-method="broker" style="display: none;" onclick="switchScenario('thb-to-usdt')">
                <span class="scenario-icon">üíé</span>
                <div>
                    <div class="scenario-title">THB ‚Üí USDT</div>
                    <div class="scenario-desc">–ë–∞—Ç—ã –≤ –∫—Ä–∏–ø—Ç—É</div>
                </div>
            </button>
            <button class="scenario-btn" data-scenario="usdt-to-thb" data-method="broker" style="display: none;" onclick="switchScenario('usdt-to-thb')">
                <span class="scenario-icon">üîÑ</span>
                <div>
                    <div class="scenario-title">USDT ‚Üí THB</div>
                    <div class="scenario-desc">–ö—Ä–∏–ø—Ç–∞ –≤ –±–∞—Ç—ã</div>
                </div>
            </button>
        </div>

        <!-- –ü–µ—Ä–µ–∫–ª—é—á–∞—Ç–µ–ª—å direction (—Ç–æ–ª—å–∫–æ –¥–ª—è broker) -->
        <div class="direction-switcher" id="directionSwitcher" style="display: none;">
            <label class="input-label">üéØ –¢–∏–ø –æ–ø–µ—Ä–∞—Ü–∏–∏</label>
            <div class="direction-buttons">
                <button class="direction-btn active" data-direction="amount" onclick="setDirection('amount')">
                    üí∞ –í–Ω–æ—à—É —Å—É–º–º—É
                </button>
                <button class="direction-btn" data-direction="target" onclick="setDirection('target')">
                    üéØ –•–æ—á—É –ø–æ–ª—É—á–∏—Ç—å
                </button>
            </div>
        </div>

        <!-- –í—ã–±–æ—Ä —É—Ä–æ–≤–Ω—è –∫–æ–º–∏—Å—Å–∏–π (—Ç–æ–ª—å–∫–æ –¥–ª—è broker) -->
        <div class="commission-level-selector" id="commissionLevelSelector" style="display: none;">
            <label class="input-label">üìä –£—Ä–æ–≤–µ–Ω—å –∫–æ–º–∏—Å—Å–∏–∏</label>
            <div class="commission-buttons">
                <button class="commission-btn" data-level="low" onclick="setCommissionLevel('low')">
                    3%
                </button>
                <button class="commission-btn active" data-level="medium" onclick="setCommissionLevel('medium')">
                    4%
                </button>
                <button class="commission-btn" data-level="high" onclick="setCommissionLevel('high')">
                    5%
                </button>
            </div>
        </div>

        <!-- –ù–∞—Å—Ç—Ä–æ–π–∫–∏ –ø–∞—Ä—Ç–Ω–µ—Ä–∞ -->
        <div class="partner-settings">
            <div class="partner-toggle">
                <label class="checkbox-label">
                    <input type="checkbox" id="hasPartner" onchange="togglePartner()">
                    <span class="checkbox-text">üë• –ï—Å—Ç—å –ø–∞—Ä—Ç–Ω–µ—Ä?</span>
                </label>
            </div>
            <div class="partner-percent-wrapper" id="partnerPercentWrapper" style="display: none;">
                <label for="partnerPercent" class="input-label">
                    % –ø–∞—Ä—Ç–Ω–µ—Ä–∞
                </label>
                <div class="input-wrapper small">
                    <input 
                        type="number" 
                        id="partnerPercent" 
                        class="amount-input" 
                        value="50"
                        min="0"
                        max="100"
                        step="1"
                        placeholder="50"
                        oninput="calculate()"
                    >
                    <span class="input-currency">%</span>
                </div>
            </div>
        </div>

        <!-- –§–æ—Ä–º–∞ —Ä–∞—Å—á–µ—Ç–∞ -->
        <div class="calculator-card">
            <div class="input-section">
                <label for="amount" class="input-label" id="inputLabel">
                    –í–≤–µ–¥–∏—Ç–µ —Å—É–º–º—É –≤ —Ä—É–±–ª—è—Ö (‚ÇΩ)
                </label>
                <div class="input-wrapper">
                    <input 
                        type="text" 
                        id="amount" 
                        class="amount-input" 
                        placeholder="–ù–∞–ø—Ä–∏–º–µ—Ä: 100000"
                        oninput="formatInput(this); calculate()"
                    >
                    <span class="input-currency" id="inputCurrency">‚ÇΩ</span>
                </div>
                <div class="quick-amounts" id="quickAmounts">
                    <button class="quick-btn" onclick="setAmount(10000)">10k</button>
                    <button class="quick-btn" onclick="setAmount(100000)">100k</button>
                    <button class="quick-btn" onclick="setAmount(500000)">500k</button>
                    <button class="quick-btn" onclick="setAmount(1000000)">1M</button>
                </div>
            </div>

            <!-- –†–µ–∑—É–ª—å—Ç–∞—Ç—ã -->
            <div class="results-section" id="resultsSection" style="display: none;">
                <div class="result-main">
                    <div class="result-label" id="resultLabel">–ö–ª–∏–µ–Ω—Ç –ø–æ–ª—É—á–∏—Ç:</div>
                    <div class="result-value" id="resultValue">0 ‡∏ø</div>
                    <div class="result-rate">
                        –ö—É—Ä—Å: <span id="finalRate">0</span> <span id="rateCurrency">‚ÇΩ/‡∏ø</span>
                    </div>
                </div>

                <div class="details-section">
                    <div class="details-header" onclick="toggleDetails()">
                        <span>üìã –î–µ—Ç–∞–ª–∏ —Ä–∞—Å—á–µ—Ç–∞</span>
                        <span class="toggle-icon" id="toggleIcon">‚ñº</span>
                    </div>
                    <div class="details-content" id="detailsContent">
                        <!-- –î–µ—Ç–∞–ª–∏ –±—É–¥—É—Ç –¥–æ–±–∞–≤–ª–µ–Ω—ã –¥–∏–Ω–∞–º–∏—á–µ—Å–∫–∏ —á–µ—Ä–µ–∑ JavaScript -->
                    </div>
                </div>
            </div>
        </div>

        <!-- –ò–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è -->
        <div class="info-card">
            <div class="info-header" onclick="toggleInfo()">
                <span>‚ÑπÔ∏è –ò–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è</span>
                <span class="toggle-icon" id="infoToggleIcon">‚ñº</span>
            </div>
            <div class="info-content" id="infoContent">
                <div class="info-note">
                    <strong>–†–µ–∂–∏–º Doverka (SBP):</strong> –†–µ–∞–ª—å–Ω—ã–µ –∫—É—Ä—Å—ã –æ—Ç API –≤ —Ä–µ–∞–ª—å–Ω–æ–º –≤—Ä–µ–º–µ–Ω–∏
                </div>
                <div class="info-note">
                    <strong>–†–µ–∂–∏–º Broker:</strong> –ö–∞—Å—Ç–æ–º–Ω—ã–π –∫—É—Ä—Å RUB-USDT + –≤—ã–±–æ—Ä —É—Ä–æ–≤–Ω—è –∫–æ–º–∏—Å—Å–∏–π
                </div>
            </div>
        </div>

        <footer class="footer">
            <p>–†–∞—Å—á–µ—Ç—ã –æ—Å–Ω–æ–≤–∞–Ω—ã –Ω–∞ –∞–∫—Ç—É–∞–ª—å–Ω—ã—Ö —Ä—ã–Ω–æ—á–Ω—ã—Ö –∫—É—Ä—Å–∞—Ö</p>
            <p class="footer-small">–í—Å–µ —Ä–∞—Å—á–µ—Ç—ã —è–≤–ª—è—é—Ç—Å—è –æ—Ä–∏–µ–Ω—Ç–∏—Ä–æ–≤–æ—á–Ω—ã–º–∏</p>
        </footer>
    </div>

    <script src="calculator.js?v=14"></script>
    <script>
        // –î–∏–∞–≥–Ω–æ—Å—Ç–∏–∫–∞ –∑–∞–≥—Ä—É–∑–∫–∏
        console.log('üîç –ü—Ä–æ–≤–µ—Ä–∫–∞ —Ñ—É–Ω–∫—Ü–∏–π:');
        console.log('switchMethod:', typeof switchMethod);
        console.log('switchScenario:', typeof switchScenario);
        console.log('setCommissionLevel:', typeof setCommissionLevel);
        console.log('updateCustomRate:', typeof updateCustomRate);
        
        // –¢–µ—Å—Ç –∫–Ω–æ–ø–æ–∫ –ø—Ä–∏ –∑–∞–≥—Ä—É–∑–∫–µ
        document.addEventListener('DOMContentLoaded', () => {
            console.log('‚úÖ DOM –∑–∞–≥—Ä—É–∂–µ–Ω');
            console.log('–ö–Ω–æ–ø–∫–∏ –º–µ—Ç–æ–¥–∞:', document.querySelectorAll('.method-btn').length);
            console.log('–ö–Ω–æ–ø–∫–∏ —Å—Ü–µ–Ω–∞—Ä–∏–µ–≤:', document.querySelectorAll('.scenario-btn').length);
            console.log('–ö–Ω–æ–ø–∫–∏ –∫–æ–º–∏—Å—Å–∏–π:', document.querySelectorAll('.commission-btn').length);
        });
    </script>
</body>
</html>

