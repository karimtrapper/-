# üöÄ –ö–∞–ª—å–∫—É–ª—è—Ç–æ—Ä —Å –¥–≤—É–º—è —Ä–µ–∂–∏–º–∞–º–∏

## üìã –ß—Ç–æ —Ä–µ–∞–ª–∏–∑–æ–≤–∞–Ω–æ

### ‚úÖ –†–µ–∂–∏–º 1: Doverka (SBP)
- –†–µ–∞–ª—å–Ω—ã–µ –∫—É—Ä—Å—ã –æ—Ç API –≤ —Ä–µ–∞–ª—å–Ω–æ–º –≤—Ä–µ–º–µ–Ω–∏
- **RUB ‚Üí THB** - –∫–ª–∏–µ–Ω—Ç –≤–Ω–æ—Å–∏—Ç —Ä—É–±–ª–∏
- **THB ‚Üê RUB** - –∫–ª–∏–µ–Ω—Ç —Ö–æ—á–µ—Ç –ø–æ–ª—É—á–∏—Ç—å –±–∞—Ç—ã
- –ö—É—Ä—Å—ã: Binance (USDT-THB) + Doverka API (RUB-USDT)

### ‚úÖ –†–µ–∂–∏–º 2: Broker  
- –ö–∞—Å—Ç–æ–º–Ω—ã–π –∫—É—Ä—Å RUB-USDT (–∑–∞–¥–∞–µ—Ç –º–µ–Ω–µ–¥–∂–µ—Ä)
- –ö—É—Ä—Å USDT-THB –æ—Ç Binance (—Ä–µ–∞–ª—å–Ω–æ–µ –≤—Ä–µ–º—è)
- 3 —É—Ä–æ–≤–Ω—è –∫–æ–º–∏—Å—Å–∏–π: –í—ã—Å–æ–∫–∏–π (5%), –°—Ä–µ–¥–Ω–∏–π (4%), –ù–∏–∑–∫–∏–π (3%)

#### –û–ø–µ—Ä–∞—Ü–∏–∏ Broker:
1. **RUB ‚Üí THB** - –æ–±–º–µ–Ω —Ä—É–±–ª–µ–π –Ω–∞ –±–∞—Ç—ã —á–µ—Ä–µ–∑ –±—Ä–æ–∫–µ—Ä–∞
2. **THB ‚Üí USDT** - –æ–±–º–µ–Ω –±–∞—Ç–æ–≤ –Ω–∞ USDT
3. **USDT ‚Üí THB** - –æ–±–º–µ–Ω USDT –Ω–∞ –±–∞—Ç—ã

---

## üéØ –ö–∞–∫ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å

### –®–∞–≥ 1: –ó–∞–ø—É—Å—Ç–∏—Ç—å API —Å–µ—Ä–≤–µ—Ä
```bash
cd "/Users/karimamirov/Desktop/untitled folder/exchange_calculator_bot/web"
python3 api_server.py
```

### –®–∞–≥ 2: –û—Ç–∫—Ä—ã—Ç—å —Å–∞–π—Ç
```bash
open index.html
```

### –®–∞–≥ 3: –í—ã–±—Ä–∞—Ç—å —Ä–µ–∂–∏–º
- **üè¶ Doverka (SBP)** - –¥–ª—è –æ–ø–µ—Ä–∞—Ü–∏–π —á–µ—Ä–µ–∑ –°–ë–ü —Å —Ä–µ–∞–ª—å–Ω—ã–º–∏ –∫—É—Ä—Å–∞–º–∏
- **üíº Broker** - –¥–ª—è –æ–ø–µ—Ä–∞—Ü–∏–π —á–µ—Ä–µ–∑ –±—Ä–æ–∫–µ—Ä–∞ —Å –∫–∞—Å—Ç–æ–º–Ω—ã–º –∫—É—Ä—Å–æ–º

### –®–∞–≥ 4 (–¥–ª—è Broker): –ù–∞—Å—Ç—Ä–æ–π–∫–∏
1. –í–≤–µ—Å—Ç–∏ –∫–∞—Å—Ç–æ–º–Ω—ã–π –∫—É—Ä—Å RUB-USDT (–Ω–∞–ø—Ä–∏–º–µ—Ä, `80.90`)
2. –í—ã–±—Ä–∞—Ç—å —É—Ä–æ–≤–µ–Ω—å –∫–æ–º–∏—Å—Å–∏–π (–í—ã—Å–æ–∫–∏–π/–°—Ä–µ–¥–Ω–∏–π/–ù–∏–∑–∫–∏–π)
3. –í—ã–±—Ä–∞—Ç—å –æ–ø–µ—Ä–∞—Ü–∏—é (RUB‚ÜíTHB, THB‚ÜíUSDT, USDT‚ÜíTHB)

### –®–∞–≥ 5: –†–∞—Å—Å—á–∏—Ç–∞—Ç—å
–í–≤–µ—Å—Ç–∏ —Å—É–º–º—É –∏ –ø–æ–ª—É—á–∏—Ç—å —Ä–µ–∑—É–ª—å—Ç–∞—Ç –≤ —Ä–µ–∞–ª—å–Ω–æ–º –≤—Ä–µ–º–µ–Ω–∏!

---

## üìä –ü—Ä–∏–º–µ—Ä—ã —Ä–∞—Å—á–µ—Ç–æ–≤

### Doverka: 100k RUB ‚Üí THB
```
–í–Ω–æ—Å–∏—Ç: 100,000 ‚ÇΩ
–ü–æ–ª—É—á–∞–µ—Ç: 36,245.10 ‡∏ø
–ö—É—Ä—Å: 2.76 ‚ÇΩ/‡∏ø
```

### Broker (—Å—Ä–µ–¥–Ω–∏–π): 100k RUB ‚Üí THB
```
–í–Ω–æ—Å–∏—Ç: 100,000 ‚ÇΩ
–ü–æ–ª—É—á–∞–µ—Ç: 36,813.22 ‡∏ø
–ö—É—Ä—Å: 2.72 ‚ÇΩ/‡∏ø
–ö–∞—Å—Ç–æ–º–Ω—ã–π –∫—É—Ä—Å: 80.90 ‚ÇΩ/USDT
```

### Broker (—Å—Ä–µ–¥–Ω–∏–π): 400k THB ‚Üí USDT
```
–í–Ω–æ—Å–∏—Ç: 400,000 ‡∏ø
–ü–æ–ª—É—á–∞–µ—Ç: 12,335.16 USDT
–ö—É—Ä—Å: 32.43 ‡∏ø/USDT
```

### Broker (—Å—Ä–µ–¥–Ω–∏–π): 13,050 USDT ‚Üí THB
```
–í–Ω–æ—Å–∏—Ç: 13,050 USDT
–ü–æ–ª—É—á–∞–µ—Ç: 389,001.65 ‡∏ø
–ö—É—Ä—Å: 0.0335 USDT/‡∏ø
```

---

## üîß –¢–µ—Ö–Ω–∏—á–µ—Å–∫–∏–µ –¥–µ—Ç–∞–ª–∏

### API Endpoints

#### GET /api/rates
–ü–æ–ª—É—á–∏—Ç—å –∞–∫—Ç—É–∞–ª—å–Ω—ã–µ –∫—É—Ä—Å—ã

**Response:**
```json
{
    "usdt_thb": 31.13,
    "rub_usdt": 83.30,
    "timestamp": "2025-12-22T17:08:24"
}
```

#### POST /api/calculate
–†–∞—Å—Å—á–∏—Ç–∞—Ç—å –æ–±–º–µ–Ω

**Request (Doverka):**
```json
{
    "method": "doverka",
    "scenario": "rub-to-thb",
    "direction": "amount",
    "amount": 100000
}
```

**Request (Broker):**
```json
{
    "method": "broker",
    "scenario": "rub-to-thb",
    "direction": "amount",
    "amount": 100000,
    "custom_rub_usdt": 80.9,
    "commission_level": "medium"
}
```

**Response:**
```json
{
    "scenario": "RUB ‚Üí THB (—Å—É–º–º–∞ RUB)",
    "rub_paid": 100000.0,
    "thb_received": 36813.22,
    "final_rate": 2.7164,
    "usdt_amount": 1211.26,
    "commission_level": "–°—Ä–µ–¥–Ω–∏–π (4%)",
    "withdrawal_fees": 112.31
}
```

---

## üìÅ –°—Ç—Ä—É–∫—Ç—É—Ä–∞ —Ñ–∞–π–ª–æ–≤

```
exchange_calculator_bot/
‚îú‚îÄ‚îÄ web/
‚îÇ   ‚îú‚îÄ‚îÄ index.html              # üÜï –û–±–Ω–æ–≤–ª–µ–Ω–Ω—ã–π HTML (–æ–±–∞ —Ä–µ–∂–∏–º–∞)
‚îÇ   ‚îú‚îÄ‚îÄ calculator.js           # üÜï –û–±–Ω–æ–≤–ª–µ–Ω–Ω—ã–π JS (–æ–±–∞ —Ä–µ–∂–∏–º–∞)
‚îÇ   ‚îú‚îÄ‚îÄ styles.css              # üÜï –û–±–Ω–æ–≤–ª–µ–Ω–Ω—ã–µ —Å—Ç–∏–ª–∏
‚îÇ   ‚îú‚îÄ‚îÄ api_server.py           # üÜï API —Å –ø–æ–¥–¥–µ—Ä–∂–∫–æ–π broker
‚îÇ   ‚îú‚îÄ‚îÄ requirements.txt        # –ó–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏ –¥–ª—è API
‚îÇ   ‚îî‚îÄ‚îÄ BROKER_MODE_README.md   # –≠—Ç–æ —Ä—É–∫–æ–≤–æ–¥—Å—Ç–≤–æ
‚îú‚îÄ‚îÄ calculator.py               # üÜï –î–æ–±–∞–≤–ª–µ–Ω –∫–ª–∞—Å—Å BrokerCalculator
‚îî‚îÄ‚îÄ bot.py                      # Telegram –±–æ—Ç (–Ω–µ –∏–∑–º–µ–Ω–µ–Ω)
```

---

## ‚öôÔ∏è –§–æ—Ä–º—É–ª—ã –¥–ª—è Broker

### RUB ‚Üí THB
1. USDT = RUB / (RUB_USDT_RATE √ó (1 + –∫–æ–º–∏—Å—Å–∏—è_RUB_USDT))
2. THB = USDT √ó USDT_THB_RATE √ó (1 - –∫–æ–º–∏—Å—Å–∏—è_USDT_THB)
3. THB_—á–∏—Å—Ç—ã–µ = THB - –∫–æ–º–∏—Å—Å–∏—è_–≤—ã–≤–æ–¥–∞ (0.25% + 20 THB)

### THB ‚Üí USDT
1. USDT = THB / (USDT_THB_RATE √ó (1 + –∫–æ–º–∏—Å—Å–∏—è_THB_USDT))
2. USDT_—á–∏—Å—Ç—ã–µ = USDT - 1 USDT (–∫–æ–º–∏—Å—Å–∏—è –≤—ã–≤–æ–¥–∞)

### USDT ‚Üí THB
1. THB = USDT √ó USDT_THB_RATE √ó (1 - –∫–æ–º–∏—Å—Å–∏—è_–ø—Ä—è–º–∞—è)
2. THB_—á–∏—Å—Ç—ã–µ = THB - –∫–æ–º–∏—Å—Å–∏—è_–≤—ã–≤–æ–¥–∞ (0.25% + 20 THB)

---

## üé® –ò–Ω—Ç–µ—Ä—Ñ–µ–π—Å

### –≠–ª–µ–º–µ–Ω—Ç—ã —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è
- **–ü–µ—Ä–µ–∫–ª—é—á–∞—Ç–µ–ª—å –º–µ—Ç–æ–¥–∞** (Doverka / Broker)
- **–ê–∫—Ç—É–∞–ª—å–Ω—ã–µ –∫—É—Ä—Å—ã** (–æ–±–Ω–æ–≤–ª—è—é—Ç—Å—è –≤ —Ä–µ–∞–ª—å–Ω–æ–º –≤—Ä–µ–º–µ–Ω–∏)
- **–ö–∞—Å—Ç–æ–º–Ω—ã–π –∫—É—Ä—Å** (—Ç–æ–ª—å–∫–æ –¥–ª—è Broker)
- **–£—Ä–æ–≤–µ–Ω—å –∫–æ–º–∏—Å—Å–∏–π** (—Ç–æ–ª—å–∫–æ –¥–ª—è Broker)
- **–°—Ü–µ–Ω–∞—Ä–∏–∏ –æ–ø–µ—Ä–∞—Ü–∏–π** (–º–µ–Ω—è—é—Ç—Å—è –≤ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏ –æ—Ç –º–µ—Ç–æ–¥–∞)
- **–ë—ã—Å—Ç—Ä—ã–µ –∫–Ω–æ–ø–∫–∏** (10k, 100k, 500k, 1M)
- **–î–µ—Ç–∞–ª–∏ —Ä–∞—Å—á–µ—Ç–∞** (—Ä–∞—Å–∫—Ä—ã–≤–∞—é—â–∏–π—Å—è –±–ª–æ–∫)

---

## ‚úÖ –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ

### –¢–µ—Å—Ç 1: API —Ä–∞–±–æ—Ç–∞–µ—Ç
```bash
curl http://localhost:5001/api/rates
```

### –¢–µ—Å—Ç 2: Broker RUB ‚Üí THB
```bash
curl -X POST http://localhost:5001/api/calculate \
  -H "Content-Type: application/json" \
  -d '{
    "method": "broker",
    "scenario": "rub-to-thb",
    "direction": "amount",
    "amount": 100000,
    "custom_rub_usdt": 80.9,
    "commission_level": "medium"
  }'
```

### –¢–µ—Å—Ç 3: Doverka RUB ‚Üí THB
```bash
curl -X POST http://localhost:5001/api/calculate \
  -H "Content-Type: application/json" \
  -d '{
    "method": "doverka",
    "scenario": "rub-to-thb",
    "direction": "amount",
    "amount": 100000
  }'
```

---

## üìù –ü—Ä–∏–º–µ—á–∞–Ω–∏—è

1. **Doverka —Ä–µ–∂–∏–º** –∏—Å–ø–æ–ª—å–∑—É–µ—Ç —Ä–µ–∞–ª—å–Ω—ã–µ –∫—É—Ä—Å—ã –æ—Ç API –≤ —Ä–µ–∞–ª—å–Ω–æ–º –≤—Ä–µ–º–µ–Ω–∏
2. **Broker —Ä–µ–∂–∏–º** –∏—Å–ø–æ–ª—å–∑—É–µ—Ç –∫–∞—Å—Ç–æ–º–Ω—ã–π –∫—É—Ä—Å RUB-USDT + —Ä–µ–∞–ª—å–Ω—ã–π –∫—É—Ä—Å USDT-THB –æ—Ç Binance
3. –í—Å–µ —Ä–∞—Å—á–µ—Ç—ã –ø—Ä–æ–∏—Å—Ö–æ–¥—è—Ç —á–µ—Ä–µ–∑ API —Å–µ—Ä–≤–µ—Ä –Ω–∞ –ø–æ—Ä—Ç—É 5001
4. –°—Ç–∞—Ä—ã–µ –≤–µ—Ä—Å–∏–∏ —Ñ–∞–π–ª–æ–≤ —Å–æ—Ö—Ä–∞–Ω–µ–Ω—ã –∫–∞–∫ `index_old.html` –∏ `calculator_old.js`

---

## üöÄ –ì–æ—Ç–æ–≤–æ –∫ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—é!

–¢–µ–ø–µ—Ä—å —É –≤–∞—Å –µ—Å—Ç—å –ø–æ–ª–Ω–æ—Ü–µ–Ω–Ω—ã–π –∫–∞–ª—å–∫—É–ª—è—Ç–æ—Ä —Å –¥–≤—É–º—è —Ä–µ–∂–∏–º–∞–º–∏ —Ä–∞–±–æ—Ç—ã:
- **Doverka** –¥–ª—è –æ–ø–µ—Ä–∞—Ü–∏–π —á–µ—Ä–µ–∑ –°–ë–ü
- **Broker** –¥–ª—è –æ–ø–µ—Ä–∞—Ü–∏–π —á–µ—Ä–µ–∑ –±—Ä–æ–∫–µ—Ä–∞ —Å –∫–∞—Å—Ç–æ–º–Ω—ã–º–∏ –∫—É—Ä—Å–∞–º–∏

–í—Å–µ –æ–ø–µ—Ä–∞—Ü–∏–∏ —Ä–∞–±–æ—Ç–∞—é—Ç –≤ —Ä–µ–∞–ª—å–Ω–æ–º –≤—Ä–µ–º–µ–Ω–∏ —Å –∞–∫—Ç—É–∞–ª—å–Ω—ã–º–∏ –∫—É—Ä—Å–∞–º–∏! üéâ

